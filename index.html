<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Siberite by bogdanovich</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Siberite</h1>
        <h2>Siberite is a simple, lightweight, leveldb backed message queue written in Go.</h2>
        <a href="https://github.com/bogdanovich/siberite" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="siberite" class="anchor" href="#siberite" aria-hidden="true"><span class="octicon octicon-link"></span></a>Siberite</h1>

<p><a href="http://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/hexpm/l/plug.svg" alt="License"></a> <a href="https://travis-ci.org/bogdanovich/siberite"><img src="https://travis-ci.org/bogdanovich/siberite.svg?branch=master" alt="Build"></a> <a href="https://github.com/bogdanovich/siberite/releases/latest"><img src="https://img.shields.io/badge/release-v0.6-blue.svg" alt="Release"></a>
<a href="https://gowalker.org/github.com/bogdanovich/siberite"><img src="http://gowalker.org/api/v1/badge" alt="Go Walker"></a></p>

<p>Siberite is a simple leveldb backed message queue server<br>
(<a href="https://github.com/twitter/kestrel">twitter/kestrel</a>, <a href="https://github.com/wavii/darner">wavii/darner</a> rewritten in Go).</p>

<p>Siberite is a very simple message queue server.  Unlike in-memory servers such as <a href="http://redis.io/">redis</a>, Siberite is
designed to handle queues much larger than what can be held in RAM.  And unlike enterprise queue servers such as
<a href="http://www.rabbitmq.com/">RabbitMQ</a>, Siberite keeps all messages <strong>out of process</strong>,
using <a href="https://github.com/syndtr/goleveldb">goleveldb</a> as a persistent storage.</p>

<p>The result is a durable queue server that uses a small amount of in-resident memory regardless of queue size.</p>

<p>Siberite is based on Robey Pointer's <a href="https://github.com/robey/kestrel">Kestrel</a> - simple, distributed message queue.
Like Kestrel, Siberite follows the "No talking! Shhh!" approach to distributed queues:
A single Siberite server has a set of queues identified by name.  Each queue is a strictly-ordered FIFO,
and querying from a fleet of Siberite servers provides a loosely-ordered queue.
Siberite also supports Kestrel's two-phase reliable fetch: if a client disconnects before confirming it handled
a message, the message will be handed to the next client.</p>

<p>Compared to Kestrel and Darner, Siberite is easier to build, maintain and distribute.
It uses an order of magnitude less memory compared to Kestrel, and has an ability
to consume queue multiple times (using durable cursors feature).</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ol>
<li>
<p>Siberite clients can consume single source queue multiple times using <code>get &lt;queue&gt;.&lt;cursor_name&gt;</code> syntax.</p>

<ul>
<li>Usually, with <code>get &lt;queue&gt;</code> syntax, returned message gets expired and deleted from queue.</li>
<li>With cursor syntax <code>get &lt;queue&gt;.&lt;cursor_name&gt;</code>, a durable
cursor gets initialized. It shifts forward with every read without deleting
any messages in the source queue. Number of cursors per queue is not limited.</li>
<li>If you continue reads from the source queue with usual syntax again, siberite will continue
deleting already serverd messages from the head of the queue. Any existing cursor that is
internally points to an already expired message will start serving messages
from the current queue head on the next read.</li>
<li>Durable cursors are also support two-phase reliable reads. All failed reliable
reads for each cursor get stored in cursor's own small persistent queue and get
served to other cursor readers.</li>
</ul>
</li>
<li>
<p>Fanout queues</p>

<ul>
<li>Siberite allows you to insert new message into multiple queues at once
by using the following syntax <code>set &lt;queue&gt;+&lt;another_queue&gt;+&lt;third_queue&gt; ...</code>
</li>
</ul>
</li>
</ol>

<h2>
<a id="benchmarks" class="anchor" href="#benchmarks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Benchmarks</h2>

<p><a href="https://github.com/bogdanovich/siberite/blob/master/docs/benchmarks.md">Siberite performance benchmarks</a></p>

<h2>
<a id="build" class="anchor" href="#build" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build</h2>

<p>Make sure your <code>GOPATH</code> is correct</p>

<pre><code>go get github.com/bogdanovich/siberite
cd $GOPATH/src/github.com/bogdanovich/siberite
go get ./...
go build siberite.go
mkdir ./data
./siberite -listen localhost:22133 -data ./data
2015/09/22 06:29:38 listening on 127.0.0.1:22133
2015/09/22 06:29:38 initializing...
2015/09/22 06:29:38 data directory:  ./data
</code></pre>

<p>or download <a href="https://github.com/bogdanovich/siberite/releases">darwin-x86_64 or linux-x86_64 builds</a></p>

<h2>
<a id="protocol" class="anchor" href="#protocol" aria-hidden="true"><span class="octicon octicon-link"></span></a>Protocol</h2>

<p>Siberite follows the same protocol as <a href="http://github.com/robey/kestrel/blob/master/docs/guide.md#memcache">Kestrel</a>,
which is the memcache TCP text protocol.</p>

<p><a href="https://github.com/bogdanovich/siberite/blob/master/docs/clients.md">List of compatible clients</a></p>

<h2>
<a id="telnet-demo" class="anchor" href="#telnet-demo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Telnet demo</h2>

<pre><code>telnet localhost 22133
Connected to localhost.
Escape character is '^]'.

set work 0 0 10
1234567890
STORED

set work 0 0 2
12
STORED

get work
VALUE work 0 10
1234567890
END

get work/open
VALUE work 0 2
12
END

get work/close
END

stats
STAT uptime 47
STAT time 1443308758
STAT version siberite-0.4.1
STAT curr_connections 1
STAT total_connections 1
STAT cmd_get 2
STAT cmd_set 2
STAT queue_work_items 0
STAT queue_work_open_transactions 0
END

# other commands:
# get work/peek
# get work/open
# get work/close/open
# get work/abort
# get work.cursor_name
# get work.cursor_name/open
# get work.my_cursor/close/open
# set work+fanout_queue
# flush work
# delete work
# flush_all
</code></pre>

<h2>
<a id="not-supported" class="anchor" href="#not-supported" aria-hidden="true"><span class="octicon octicon-link"></span></a>Not supported</h2>

<ul>
<li>Waiting a given time limit for a new item to arrive /t= (allowed by protocol but does nothing)</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/bogdanovich/siberite/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/bogdanovich/siberite/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/bogdanovich/siberite"></a> is maintained by <a href="https://github.com/bogdanovich">bogdanovich</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-69855897-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
